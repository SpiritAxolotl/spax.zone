<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta property="og:title" content="Is Spax Currently At School?">
        <meta property="og:description" content="See if I'm currently at school or not!">
        <meta property="og:type" content="website">
        <meta name="og:image" itemprop="image" content="/images/spax/Smirk.png">
        <!--<meta http-equiv="Refresh" content="0; url='iwanttodie.html'"/>-->
        <link rel="icon" href="Smirk_Circle.png"></link>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        <script src="jquery.countdown.min.js"></script>
        <title>Is Spax At School?</title>

        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

        <!-- Bootstrap JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="styles.css" type=text/css>

    </head>
    <body>
        <div class="text-box flex-container">
            <div style="color:red;">
                Current status: Broken.<br>
                -Spax
            </div>
        </div>
        <div class="text-box flex-container">
            <div id="date">
                    <img src="
                images/spax/Worried.png
                    "></img>
                This text should be replaced by the js. If you're seeing this, it means that my code is broken :(
            </div>
        </div>
        <div class="text-box flex-container">
            <div>
                (And <a href="index.html">click here</a> to go back to the main page!)
            </div>
        </div>
        <div class="text-box flex-container">
            <div id="debug">
            </div>
        </div>
        <!--<div class="text-box flex-container">
            <div id="debug2">
            </div>
        </div>-->
        <script>
            const d = new Date();
            let ch = d.getUTCHours()-7;
            let cm = d.getUTCMinutes();
            let m = ((d.getUTCHours()-7)*60)+d.getUTCMinutes();
            //let m = d.getUTCMinutes();
            let h = (d.getUTCHours()-7)
            let f = d.getUTCDay();
            let sh = "s";
            let sm = "s";
            let dh = " hour";
            let dm = " minute";
            let dand = " and ";
            document.getElementById("debug").innerHTML = "Haha debug console go brrrrrrrrr<br>"+"<span style='color:green;'>"+m+"<br>"+ch+"</span>";
            time();
            if (ch==0||ch==12){
                    sh=""
                } else if (ch==23){
                    dh=""
                    sh=""
                } else {
                    sh="s"
                }
                if (cm==0){
                    sm=""
                } else if (cm==59){
                    dm=""
                    sm=""
                } else {
                    sm="s"
                }
                if ((ch==0||ch==12)&&(cm==0)){
                    dand = ""
                }
            setInterval(time, 1000);
            setInterval(convertTime, 2000);
            
            function convertTime(){
            document.getElementById("debug2").innerHTML = "";
            let d = new Date();
                if ((d.getUTCHours()-7)<0){
                    m = ((23+(d.getUTCHours()-7))*60)+d.getUTCMinutes();

                    if(cm==0){
                    ch = ch+1;
                    cm = 0;
                    document.getElementById("debug2").innerHTML = "f";
                    } else {
                    ch = 23+d.getUTCHours()-7;
                    cm = d.getUTCMinutes();
                    document.getElementById("debug2").innerHTML = "g";
                    }
                    if ((d.getUTCDay()-1)<0){
                        f = 6+d.getUTCDay()-1;
                        document.getElementById("debug2").innerHTML = document.getElementById("debug2").innerHTML+"h";
                    }
                } else {
                    m = ((d.getUTCHours()-7)*60)+d.getUTCMinutes();
                    f = d.getUTCDay();
                    ch = d.getUTCHours()-7;
                    cm = d.getUTCMinutes();
                    document.getElementById("debug2").innerHTML = "j";
                }
                if (ch==0||ch==12){
                    let sh=""
                } else if (ch==23){
                    let dh=""
                    let sh=""
                } else {
                    let sh="s"
                }
                if (cm==0){
                    let sm=""
                } else if (cm==59){
                    let dm=""
                    let sm=""
                } else {
                    let sm="s"
                }
                if ((ch==0||ch==12)&&(cm==0)){
                    let dand = ""
                }
            }

            function time(){
            //if during mon-thurs (school days)
            if ((f==1||f==2||f==3||f==4)) {
                //if time is between 7:30 and 2:30 (school hours)
                if(m>=450&&m<810){
                    //if time is between 10:48 and 11:17 (lunch break)
                    if(m>=548&&m<677){
                        //sets html for lunch
                        document.getElementById("date").innerHTML = "<img src='images/spax/Smirk.png'></img> Yo! I'm currently in school right now, but it's lunch for me.";
                    } else {
                        //sets html for school
                        document.getElementById("date").innerHTML = "<img src='images/spax/Smirk.png'></img> Yo! I'm currently in school right now! But I'll be out in "+(13-ch)+" hours and "+(60-cm)+dm+sm+"!";
                    }

                //if time is between 8:30pm and 6:30am
                } else if (m>=1170||m<330) {
                    //sleeping html
                    if (m>=270){
                    document.getElementById("date").innerHTML = "<img src='images/spax/Smirk.png'></img> Yo! I may not be in school right now, but I'm probably asleep. I'll be awake in about "+(60-cm)+" minutes!";
                    } else {
                    document.getElementById("date").innerHTML = "<img src='images/spax/Smirk.png'></img> Yo! I may not be in school right now, but I'm probably asleep. I'll be awake in about "+(5-ch)+" hours and "+(60-cm)+" minutes!";
                    }
                } else if (m>=330){
                    document.getElementById("date").innerHTML = "<img src='images/spax/Smirk.png'></img> Yo! I'm not in school right now, but I will be in about "+(60-cm)+" minutes. (I just woke up and I'm going to school.)";
                } else {
                    document.getElementById("date").innerHTML = "<img src='images/spax/Smirk.png'></img> Yo! I'm not in school right now!";
                }
            } else if (f==5) {
                if(m>=450&&m<630){
                    if (m>=570){
                        document.getElementById("date").innerHTML = "<img src='images/spax/Smirk.png'></img> Yo! I'm currently in school right now! But I'll be out in "+(60-cm)+" minutes!";
                    } else {
                        //sets html for school
                        document.getElementById("date").innerHTML = "<img src='images/spax/Smirk.png'></img> Yo! I'm currently in school right now! But I'll be out in "+(10-ch)+" hours and "+(60-cm)+" minutes!";
                    }
                } else if (m>=1170||m<330) {
                    //sleeping html
                    if (m>=270){
                    document.getElementById("date").innerHTML = "<img src='images/spax/Smirk.png'></img> Yo! I may not be in school right now, but I'm probably asleep. I'll be awake in about "+(60-cm)+" minutes!";
                    } else {
                    document.getElementById("date").innerHTML = "<img src='images/spax/Smirk.png'></img> Yo! I may not be in school right now, but I'm probably asleep. I'll be awake in about "+(5-ch)+" hours and "+(60-cm)+" minutes!";
                    }
                } else {
                    document.getElementById("date").innerHTML = "<img src='images/spax/Smirk.png'></img> Yo! I'm not in school right now!";
                }
            } else if (f==6||f==0) {
                if (m>=1170||m<330) {
                    //sleeping html
                    if (m>=270){
                    document.getElementById("date").innerHTML = "<img src='images/spax/Smirk.png'></img> Yo! I may not be in school right now (it's literally the weekend), but I'm probably asleep. I'll be awake in about "+(60-cm)+" minutes!";
                    } else {
                    document.getElementById("date").innerHTML = "<img src='images/spax/Smirk.png'></img> Yo! I may not be in school right now (it's literally the weekend), but I'm probably asleep. I'll be awake in about "+(5-ch)+" hours and "+(60-cm)+" minutes!";
                    }
                } else {
                document.getElementById("date").innerHTML = "<img src='images/spax/Smirk.png'></img> Yo! I'm not in school! (It's literally the weekend bro.)";
                }
            }
        }
        </script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    </body>
</html>
